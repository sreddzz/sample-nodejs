name: learn-github-actions
run-name: ${{ github.actor }} is learning GitHub Actions
on: [push]
jobs:
  demo-nodejs-app:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - run: npm install --cache /tmp/empty-cache
      - run: npm test
      
  scan: 
    name: Xray 
    runs-on: self-hosted 
    container: ${{inputs.container}} 
    if: ${{vars.XRAY_ENABLED == 'true'}} ## env vars won't get evaluated as a boolean 
    continue-on-error: true 

    permissions: 
      actions: read 
      contents: read 
      security-events: write 

    defaults: 
      run: 
        working-directory: ${{inputs.working-directory}}
